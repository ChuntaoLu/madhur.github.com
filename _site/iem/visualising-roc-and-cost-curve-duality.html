<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en-us">
<head>
   <meta http-equiv="content-type" content="text/html; charset=utf-8" />
   <title>Visualising ROC and Cost Curve Duality &larr; Inductio Ex Machina</title>
   <meta name="author" content="Madhur Ahuja" />

     <link rel="start" href="/" />

	
	
	
  	<link rel="alternate" type="application/atom+xml" href="atom.xml" title="RSS feed" />
	

   <!-- syntax highlighting CSS -->
   <link rel="stylesheet" href="/files/css/syntax.css" type="text/css" />

   <!-- Homepage CSS -->
   <link rel="stylesheet" href="/files/css/screen.css" type="text/css" />

</head>
<body id="">
<div id="site">

  
<div id="header">
	<h1>
	<a href="/iem/" title="A machine learning blog">Inductio ex Machina</a>
	<span class="byline">&larr; <a href="/">Mark Reid</a></span>
</h1>
<ul class="nav">
  <li><a class="home" href="/iem/">Home</a></li>
  <li><a class="info" href="/iem/info.html">Info</a></li>
  <li><a class="past" href="/iem/past.html">Past</a></li>
  <li><a class="kith" href="/iem/kith.html">Kith</a></li>
</ul>

</div>

<div id="page">
	
  <h1 class="emphnext">Visualising ROC and Cost Curve Duality</h1>

<p>I&#8217;ve been looking into the relationships between losses, divergences and other measures of predictors and problems recently and came across a 2006 paper by Drummond and Holte entitled <a href='http://www.cs.ualberta.ca/~holte/Publications/mlj2006.pdf' class='pdf'>Cost Curves: An improved method for visualizing classifier performance</a>. This paper describes a representation of classifier performance that is very closely related to the usual ROC curve. However, unlike ROC plots of (False Positive Rate, True Positive Rate)-points for various operating conditions of the classifier cost curves show (cost, risk)-points. That is, for each cost plotted on the x axis, the y co-ordinate shows the cost-weighted loss for the classifier.</p>

<p>As explained in Drummond and Holte&#8217;s paper, there is a simple point-line duality between ROC space and Cost-Loss space based on the definition of cost-weighted loss. If <span class='maruku-inline'><img class='maruku-png' src='/images/latex/7ee1f97b36aab2fe3e839f075d984325.png' alt='$(FP,TP)$' style='vertical-align: -0.555555555555556ex;height: 2.33333333333333ex;' /></span> is a point in ROC space then the cost-loss relationship <span class='maruku-inline'><img class='maruku-png' src='/images/latex/e8a776bc9b506bc407749345d6010981.png' alt='$(c, L)$' style='vertical-align: -0.555555555555556ex;height: 2.33333333333333ex;' /></span> is linear and satisfies</p>
<div class='maruku-equation'><img class='maruku-png' src='/images/latex/ca34ec7669dbd5f6736e1678dd825a32.png' alt='$L = (1-\pi) c FP + \pi (1-c) (1 - TP)$' style='height: 2.33333333333333ex;' /><span class='maruku-eq-tex'><code style='display: none'>L = (1-\pi) c FP + \pi (1-c) (1 - TP)</code></span></div>
<p>where <span class='maruku-inline'><img class='maruku-png' src='/images/latex/4fce2a5cc5345fd1c87ac474f42194ae.png' alt='$c$' style='vertical-align: -0.0ex;height: 1.0ex;' /></span> is the cost of a false positive and <span class='maruku-inline'><img class='maruku-png' src='/images/latex/e1db3eb8a0b7ee3719f4aeb8c38db8b9.png' alt='$\pi$' style='vertical-align: -0.0ex;height: 1.0ex;' /></span> the prior probability of the positive class<sup id='fnref:1'><a href='#fn:1' rel='footnote'>1</a></sup>.</p>

<p>Given a specific <span class='maruku-inline'><img class='maruku-png' src='/images/latex/e1db3eb8a0b7ee3719f4aeb8c38db8b9.png' alt='$\pi$' style='vertical-align: -0.0ex;height: 1.0ex;' /></span> this relationship is completely invertible. A point <span class='maruku-inline'><img class='maruku-png' src='/images/latex/e8a776bc9b506bc407749345d6010981.png' alt='$(c,L)$' style='vertical-align: -0.555555555555556ex;height: 2.33333333333333ex;' /></span> in cost-loss space corresponds to the following line in ROC space</p>
<div class='maruku-equation'><img class='maruku-png' src='/images/latex/28ffb391a36009e74b43fe4af8fdaa84.png' alt='$TP = \frac{(1-\pi) c}{\pi(1-c)} FP + \frac{(1-\pi) c - L}{\pi(1-c)}.$' style='height: 3.33333333333333ex;' /><span class='maruku-eq-tex'><code style='display: none'>TP = \frac{(1-\pi) c}{\pi(1-c)} FP + \frac{(1-\pi) c - L}{\pi(1-c)}.</code></span></div>
<p>My ability to intuitively grasp this duality relationship was not that great so I hacked together the following applet to help. On the right is a black curve in ROC space representing five (False Positive, True Positive) rates for some imaginary classifier. The points are (0,0), (0.1, 0.5), (0.3, 0.8), (0.7, 0.95) and (1,1). The diagonal grey line on the ROC plot represents the performance of random classifiers - each increase in True Positive rate is countered by an equivalent decrease in False Positive rate.</p>

<p>The left plot, entitled &#8220;Cost Space&#8221; shows the (cost,loss) duals of both the black and grey curves from the right-hand plot. The grey diagonal on the right corresponds to a &#8220;tent&#8221; on the left that represents the best performance of a classifier that constantly predicts a single class.</p>

<dl class='figure'>
<dt><img src='/images/figures/siroc-screenshot.png' alt='Screenshot of Cost/ROC Curve Duality' width='650' /></dt>

<dd><strong>Figure 1</strong>: Screenshot of the cost/ROC visualisation applet. Click <a href='/files/code/siroc/'>here</a> to open the applet and interact with it.</dd>
</dl>

<p>If you click in the applet area you can get a feel for the relationship between these two representations. When you move your mouse over ROC space you will see the corresponding line in cost space. Conversely, when you move your mouse over the cost space plot you will see the dual line in ROC space.</p>

<p>The bar at the bottom of the two plots controls the prior probability <span class='maruku-inline'><img class='maruku-png' src='/images/latex/e1db3eb8a0b7ee3719f4aeb8c38db8b9.png' alt='$\pi$' style='vertical-align: -0.0ex;height: 1.0ex;' /></span>. You can see how the dual curve in cost space changes as this parameter is modified.</p>

<p>The code for this applet is available through <a href='http://github.com'>GitHub</a>. The visualisation aspects are written in <a href='http://processing.org'>Processing</a> and are <a href='http://github.com/mreid/siroc/'>available here</a>. This relies on some <a href='http://github.com/mreid/geovex/'>Java code</a> I also wrote that does the point-line conversions.</p>

<p><a href='http://www.site.uottawa.ca/~cdrummon/'>Chris Drummond</a> has also created an <a href='http://www.site.uottawa.ca/~cdrummon/rocconversion.html'>applet</a> to do the same kind of conversion. The one here can be seen as complementary since his version allows the user to add data points and construct curves whereas mine just aims to make the key relationship interactive.</p>

<h2 id='updates'>Updates</h2>

<ul>
<li>
<p><em>30 January 2009</em>: Replaced inline applet with a screenshot and link to page hosted on GitHub.</p>
</li>

<li>
<p><em>28 July 2009</em>: Link to applet is now hosted locally, not on GitHub.</p>
</li>
</ul>
<div class='footnotes'><hr /><ol><li id='fn:1'>
<p>My description here differs slightly from Drummond and Holte&#8217;s in that I am keeping priors and costs separate and not normalising the loss.</p>
<a href='#fnref:1' rev='footnote'>&#8617;</a></li></ol></div>

  <address class="signature">
    <a class="author" href="http://madhur.github.com">Madhur Ahuja</a> 
    <span class="date">21 April 2008</span>
    <span class="location">Canberra, Australia</span>
  </address>
</div><!-- End Page -->


<!-- Discus Comments -->
<div id="disqus_thread"></div>

<!-- Enable Disqus comments -->
<script type="text/javascript">
	var disqus_iframe_css = "http://mark.reid.name/css/screen.css";
	var disqus_title = "Visualising ROC and Cost Curve Duality";
	var disqus_message = "Discussion of the point-line duality between Drummond and Holte's cost curves and ROC curves. An applet is provided to help visualise this relationship. ";
</script>
<script type="text/javascript" src="http://disqus.com/forums/markreid/embed.js"></script>

<noscript>
		<a href="http://markreid.disqus.com/?url=ref">View the discussion thread.</a>
</noscript>

  
  <div id="footer">
	<address>
		<span class="copyright">
			Content &amp; Design by 
			<a href="/info/site.html">Madhur Ahuja</a>
			<br/>
			(Some rights reserved)			
		</span>
		<span class="engine">
			Powered by 
			<a href="http://github.com/mreid/jekyll/" title="A static, minimalist CMS">Jekyll</a>
		</span>
	</address>
  </div>
</div>
<!--[if IE 6]>
<script type="text/javascript"> 
	/*Load jQuery if not already loaded*/ if(typeof jQuery == 'undefined'){ document.write("<script type=\"text/javascript\"   src=\"http://ajax.googleapis.com/ajax/libs/jquery/1.3.2/jquery.min.js\"></"+"script>"); var __noconflict = true; } 
	var IE6UPDATE_OPTIONS = {
		icons_path: "http://static.ie6update.com/hosted/ie6update/images/"
	}
</script>
<script type="text/javascript" src="http://static.ie6update.com/hosted/ie6update/ie6update.js"></script>
<![endif]-->
</body>
</html>
